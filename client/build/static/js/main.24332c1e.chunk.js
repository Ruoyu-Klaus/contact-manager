(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,a){e.exports=a(69)},44:function(e,t,a){},50:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),c=a.n(l),o=a(10),u=a(2),s=(a(44),Object(n.createContext)()),i=Object(n.createContext)(),m=function(e){var t=e.title,a=e.icon,l=Object(n.useContext)(s),c=Object(n.useContext)(i),u=l.isAuthenticated,m=l.logoutUser,p=l.user,d=c.clearContact,E=r.a.createElement(n.Fragment,null,r.a.createElement("li",null,"\u4f60\u597d ",p&&p.name),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){m(),d()},href:"#!"},r.a.createElement("i",{className:"fas fa-sign-out-alt"})," ",r.a.createElement("span",{className:"hide-sm"},"\u767b\u51fa")))),f=r.a.createElement(n.Fragment,null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/"},"\u9996\u9875"),r.a.createElement(o.b,{to:"/about"},"\u5173\u4e8e"),r.a.createElement(o.b,{to:"/register"},"\u6ce8\u518c"),r.a.createElement(o.b,{to:"/login"},"\u767b\u9646")));return r.a.createElement("div",{className:"navbar bg-primary"},r.a.createElement("h1",null,r.a.createElement("i",{className:a}),r.a.createElement(o.b,{to:"/"},t)),r.a.createElement("ul",null,u?E:f))};m.defaultProps={title:" \u8054\u7cfb",icon:"fas fa-id-card-alt"};var p=m,d=Object(n.createContext)(),E=function(){var e=Object(n.useContext)(d).alerts;return 0!==e.length&&e.map((function(e){return r.a.createElement("div",{key:e.id,className:"alert alert-".concat(e.type)},r.a.createElement("i",{className:"fas fa-info-circle"})," ",e.msg)}))},f=a(73),b=a(71),v=a(9),h=function(e){var t=e.contact,a=Object(n.useContext)(i),l=a.deleteContact,c=a.setCurrent,o=a.clearCurrent,u=t._id,s=t.name,m=t.email,p=t.phone,d=t.type;return r.a.createElement("div",{className:"card bg-light"},r.a.createElement("h3",{className:"text-left text-primary"},s,r.a.createElement("span",{style:{float:"right"},className:"badge "+("professional"===d?"badge-success":"badge-primary")},"professional"===d?"\u5de5\u4f5c":"\u751f\u6d3b")),r.a.createElement("ul",{className:"list"},m&&r.a.createElement("li",null,r.a.createElement("i",{className:"fas fa-envelope-open"})," ",m),p&&r.a.createElement("li",null,r.a.createElement("i",{className:"fas fa-phone"})," ",p)),r.a.createElement("p",null,r.a.createElement("button",{className:"btn btn-dark btn-sm",onClick:function(){return c(t)}},"\u7f16\u8f91"),r.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),l(u),o()}},"\u5220\u9664")))};h.prototypes={contact:a.n(v).a.object.isRequired};var g=h;a(50);var y=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"lds-spinner"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))},C=function(){var e=Object(n.useContext)(i),t=e.contacts,a=e.getContact,l=e.loading,c=e.filtered;return Object(n.useEffect)((function(){a()}),[]),null!==t&&0===t.length?r.a.createElement("h4",null,"\u76ee\u524d\u6682\u65e0\u8054\u7cfb\u4eba"):r.a.createElement(n.Fragment,null,null===t||l?r.a.createElement(y,null):r.a.createElement(f.a,{className:"todo-list"},(c||t).map((function(e){return r.a.createElement(b.a,{key:e._id,timeout:500,classNames:"item"},r.a.createElement(g,{contact:e}))}))))},O=a(12),j=a(1),R=a(7),T=function(){var e=Object(n.useContext)(i),t=e.addContact,a=e.updateContact,l=e.current,c=e.clearCurrent,o={name:"",email:"",phone:"",type:"personal"},u=Object(n.useState)(o),s=Object(R.a)(u,2),m=s[0],p=s[1];Object(n.useEffect)((function(){p(null!==l?Object.assign(o,l):o)}),[e,l]);var d=function(e){return p(Object(j.a)({},m,Object(O.a)({},e.target.name,e.target.value)))},E=m.name,f=m.email,b=m.phone,v=m.type;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),null!==l?a(m):t(m),p(o)}},r.a.createElement("h2",{className:"text-primary"},l?"\u7f16\u8f91\u8054\u7cfb\u4eba":"\u6dfb\u52a0\u65b0\u8054\u7cfb\u4eba"),r.a.createElement("input",{type:"text",placeholder:"\u59d3\u540d",name:"name",value:E,onChange:d}),r.a.createElement("input",{type:"email",placeholder:"\u90ae\u7bb1",name:"email",value:f,onChange:d}),r.a.createElement("input",{type:"text",placeholder:"\u7535\u8bdd",name:"phone",value:b,onChange:d}),r.a.createElement("h5",null,"\u8054\u7cfb\u4eba\u7c7b\u522b"),r.a.createElement("input",{type:"radio",name:"type",value:"personal",checked:"personal"===v,onChange:d})," ","\u751f\u6d3b"," ",r.a.createElement("input",{type:"radio",name:"type",value:"professional",checked:"professional"===v,onChange:d})," ","\u5de5\u4f5c",r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:l?"\u66f4\u65b0\u8054\u7cfb\u4eba":"\u6dfb\u52a0\u8054\u7cfb\u4eba",className:"btn btn-primary btn-block"})),l&&r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-light btn-block",onClick:function(){c()}},"\u8fd4\u56de")))},N=function(){var e=Object(n.useContext)(i),t=e.filterContacts,a=e.clearFilter,l=e.filtered,c=Object(n.useRef)("");Object(n.useEffect)((function(){null===l&&(c.current.value="")}));return r.a.createElement("div",null,r.a.createElement("input",{ref:c,type:"text",placeholder:"\u641c\u7d22...",onChange:function(e){""!==c.current.value?t(e.target.value):a()}}))},x=function(){var e=Object(n.useContext)(s);return Object(n.useEffect)((function(){e.loadUser()}),[]),r.a.createElement("div",{className:"grid-2"},r.a.createElement("div",null,r.a.createElement(T,null)),r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement(C,null)))},A=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"\u5173\u4e8e\u672c\u7ad9"),r.a.createElement("p",{className:"my-1"},"\u672c\u7ad9\u662f\u57fa\u4e8eReact,Express,MongoDB\u6784\u5efa\u7684\u7ec3\u624b\u9879\u76ee\uff0c\u4e0d\u53ef\u7528\u4e8e\u751f\u4ea7"),r.a.createElement("p",{className:"bg-dark p"},r.a.createElement("strong",null,"\u7248\u672c:"),"1.0.0"),r.a.createElement("p",{className:"bg-dark p"},r.a.createElement("strong",null,"\u4f5c\u8005:"),"\u82e5\u5b87"))},k=function(e){var t=Object(n.useContext)(d).setAlert,a=Object(n.useContext)(s),l=a.register,c=a.error,o=a.clearError,u=a.isAuthenticated;Object(n.useEffect)((function(){u&&e.history.push("/"),"The email has already existed"===c&&(t("\u8be5\u7528\u6237\u5df2\u5b58\u5728","danger"),o())}),[c,e.history,u]);var i=Object(n.useState)({name:"",email:"",password:"",password2:""}),m=Object(R.a)(i,2),p=m[0],E=m[1],f=p.name,b=p.email,v=p.password,h=p.password2,g=function(e){return E(Object(j.a)({},p,Object(O.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"form-container"},r.a.createElement("h1",null,"\u7528\u6237",r.a.createElement("span",{className:"text-primary"},"\u6ce8\u518c")),r.a.createElement("form",{onSubmit:function(e){switch(e.preventDefault(),!0){case!f:return t("\u8bf7\u8f93\u5165\u59d3\u540d","danger");case!b:return t("\u8bf7\u8f93\u5165\u90ae\u7bb1","danger");case!v:return t("\u8bf7\u8f93\u5165\u5bc6\u7801","danger");case v!==h:return t("\u4e24\u6b21\u5bc6\u7801\u4e0d\u76f8\u540c","danger");default:return l({name:f,email:b,password:v})}}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"\u59d3\u540d"),r.a.createElement("input",{type:"text",name:"name",value:f,onChange:g})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"\u90ae\u7bb1"),r.a.createElement("input",{type:"email",name:"email",value:b,onChange:g})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"\u5bc6\u7801"),r.a.createElement("input",{type:"password",name:"password",value:v,onChange:g,minLength:"6"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password2"},"\u786e\u8ba4\u5bc6\u7801"),r.a.createElement("input",{type:"password",name:"password2",value:h,onChange:g,minLength:"6"})),r.a.createElement("input",{type:"submit",value:"\u6ce8\u518c",className:"btn btn-primary btn-block"})))},_=function(e){var t=Object(n.useContext)(d).setAlert,a=Object(n.useContext)(s),l=a.loginUser,c=a.error,o=a.clearError,u=a.isAuthenticated;Object(n.useEffect)((function(){u&&e.history.push("/"),"Invaild Credentials for Email"===c&&(t("\u8be5\u90ae\u7bb1\u4e0d\u5b58\u5728","danger"),o()),"Invalid Credentials for Password"===c&&(t("\u5bc6\u7801\u9519\u8bef","danger"),o())}),[c,e.history,u]);var i=Object(n.useState)({email:"",password:""}),m=Object(R.a)(i,2),p=m[0],E=m[1],f=p.email,b=p.password,v=function(e){return E(Object(j.a)({},p,Object(O.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"form-container"},r.a.createElement("h1",null,"\u7528\u6237",r.a.createElement("span",{className:"text-primary"},"\u767b\u9646")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),f?b?l({email:f,password:b}):t("\u8bf7\u8f93\u5165\u5bc6\u7801","danger"):t("\u8bf7\u8f93\u5165\u90ae\u7bb1","danger")}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"\u90ae\u7bb1"),r.a.createElement("input",{type:"email",name:"email",value:f,onChange:v})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"\u5bc6\u7801"),r.a.createElement("input",{type:"password",name:"password",value:b,onChange:v})),r.a.createElement("input",{type:"submit",value:"\u767b\u9646",className:"btn btn-primary btn-block"})))},S=a(36);var w=function(e){var t=e.component,a=Object(S.a)(e,["component"]),l=Object(n.useContext)(s),c=l.isAuthenticated,o=l.loading;return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return!c&&o?r.a.createElement(u.a,{to:"/login"}):r.a.createElement(t,e)}}))},L=a(3),I=a.n(L),U=a(11),F=a(4),D=a.n(F),G=a(20),P=function(e,t){switch(t.type){case"GET_CONTACT":return Object(j.a)({},e,{contacts:t.payload,loading:!1});case"ADD_CONTACT":return Object(j.a)({},e,{contacts:[t.payload].concat(Object(G.a)(e.contacts)),loading:!1});case"DELETE_CONTACT":return Object(j.a)({},e,{contacts:e.contacts.filter((function(e){return e._id!==t.payload})),loading:!1});case"CLEAR_CONTACT":return Object(j.a)({},e,{contacts:null,filtered:null,current:null,error:null});case"UPDATE_CONTACT":return Object(j.a)({},e,{contacts:e.contacts.map((function(e){return e._id===t.payload._id?t.payload:e})),current:null,loading:!1});case"SET_CURRENT":return Object(j.a)({},e,{current:t.payload});case"CLEAR_CURRENT":return Object(j.a)({},e,{current:null});case"FILTER_CONTACTS":return Object(j.a)({},e,{filtered:e.contacts.filter((function(e){var a=new RegExp("".concat(t.payload),"gi");if(e.name.match(a)||e.email.match(a))return e}))});case"CLEAR_FILTER":return Object(j.a)({},e,{filtered:null});case"CONTACT_ERROR":return Object(j.a)({},e,{error:t.payload});default:return e}},M=function(e){var t=Object(n.useReducer)(P,{contacts:null,current:null,filtered:null,error:null}),a=Object(R.a)(t,2),l=a[0],c=a[1];D.a.defaults.baseURL="http://localhost:4000";var o=function(){var e=Object(U.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.get("/api/contacts");case 3:t=e.sent,c({type:"GET_CONTACT",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"CONTACT_ERROR",payload:e.t0.response.msg});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(U.a)(I.a.mark((function e(t){var a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,D.a.post("/api/contacts",t,a);case 4:n=e.sent,c({type:"ADD_CONTACT",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:"CONTACT_ERROR",payload:e.t0.response.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(U.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.delete("/api/contacts/".concat(t));case 3:c({type:"DELETE_CONTACT",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c({type:"CONTACT_ERROR",payload:e.t0.response.msg});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(U.a)(I.a.mark((function e(t){var a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{"Content-Type":"application/json"}},e.next=4,D.a.put("/api/contacts/".concat(t._id),t,a);case 4:n=e.sent,c({type:"UPDATE_CONTACT",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c({type:"CONTACT_ERROR",payload:e.t0.response.msg});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(i.Provider,{value:{contacts:l.contacts,current:l.current,filtered:l.filtered,error:l.error,getContact:o,addContact:u,updateContact:m,clearContact:function(){c({type:"CLEAR_CONTACT"})},deleteContact:s,setCurrent:function(e){c({type:"SET_CURRENT",payload:e})},clearCurrent:function(){c({type:"CLEAR_CURRENT",payload:null})},filterContacts:function(e){c({type:"FILTER_CONTACTS",payload:e})},clearFilter:function(){c({type:"CLEAR_FILTER"})}}},e.children)},B=function(e,t){switch(t.type){case"USER_LOADED":return Object(j.a)({},e,{isAuthenticated:!0,loading:!1,user:t.payload});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(j.a)({},e,{token:t.payload.token,isAuthenticated:!0,loading:!1});case"REGISTER_FAIL":case"LOGIN_FAIL":case"AUTH_ERROR":case"LOGINOUT":return localStorage.removeItem("token"),Object(j.a)({},e,{token:null,isAuthenticated:!1,user:null,loading:!0,error:t.payload});case"CLEAR_ERRORS":return Object(j.a)({},e,{error:null});default:return e}},H=function(e){e?D.a.defaults.headers.common["x-auth-token"]=e:delete D.a.defaults.headers.common["x-auth-token"]};D.a.defaults.baseURL="http://localhost:4000";var J=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,user:null,loading:!1,error:null},a=Object(n.useReducer)(B,t),l=Object(R.a)(a,2),c=l[0],o=l[1],u=function(){var e=Object(U.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&H(localStorage.getItem("token")),e.prev=1,e.next=4,D.a.get("/api/auth");case 4:t=e.sent,o({type:"USER_LOADED",payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(U.a)(I.a.mark((function e(t){var a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={header:{"content-type":"application/json"}},e.prev=1,e.next=4,D.a.post("/api/users",t,a);case 4:n=e.sent,o({type:"REGISTER_SUCCESS",payload:n.data}),u(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.response),o({type:"REGISTER_FAIL",payload:e.t0.response.data.msg});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(U.a)(I.a.mark((function e(t){var a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={header:{"content-type":"application/json"}},e.prev=1,e.next=4,D.a.post("/api/auth",t,a);case 4:n=e.sent,o({type:"LOGIN_SUCCESS",payload:n.data}),u(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.response),o({type:"LOGIN_FAIL",payload:e.t0.response.data.msg});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(s.Provider,{value:{token:c.token,isAuthenticated:c.isAuthenticated,user:c.user,loading:c.loading,error:c.error,register:i,loadUser:u,loginUser:m,logoutUser:function(){return o({type:"LOGINOUT"})},clearError:function(){return o({type:"CLEAR_ERRORS"})}}},e.children)},V=a(72),q=function(e,t){switch(t.type){case"SET_ALERT":return[].concat(Object(G.a)(e),[t.payload]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==t.payload}));default:return e}},z=function(e){var t=Object(n.useReducer)(q,[]),a=Object(R.a)(t,2),l=a[0],c=a[1];return r.a.createElement(d.Provider,{value:{alerts:l,setAlert:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3500,n=Object(V.a)();c({type:"SET_ALERT",payload:{id:n,msg:e,type:t}}),setTimeout((function(){c({type:"REMOVE_ALERT",payload:n})}),a)}}},e.children)};localStorage.token&&H(localStorage.getItem("token"));var K=function(){return r.a.createElement(J,null,r.a.createElement(M,null,r.a.createElement(z,null,r.a.createElement(o.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(p,null),r.a.createElement("div",{className:"container"},r.a.createElement(E,null),r.a.createElement(u.d,null,r.a.createElement(w,{exact:!0,path:"/",component:x}),r.a.createElement(u.b,{exact:!0,path:"/about",component:A}),r.a.createElement(u.b,{exact:!0,path:"/register",component:k}),r.a.createElement(u.b,{exact:!0,path:"/login",component:_}))))))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.24332c1e.chunk.js.map