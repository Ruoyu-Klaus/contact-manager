{"ast":null,"code":"import _defineProperty from\"/Users/ruoyuwang/Documents/GitHub/contact-keeper/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/ruoyuwang/Documents/GitHub/contact-keeper/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/ruoyuwang/Documents/GitHub/contact-keeper/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from'react';import AlertContext from'../../Context/Alert/alterContext';import AuthContext from'../../Context/Auth/authContext';var Register=function Register(props){var alertContext=useContext(AlertContext);var setAlert=alertContext.setAlert;var authContext=useContext(AuthContext);var register=authContext.register,error=authContext.error,clearError=authContext.clearError,isAuthenticated=authContext.isAuthenticated;useEffect(function(){if(isAuthenticated){props.history.push('/');}if(error==='The email has already existed'){setAlert('该用户已存在','danger');clearError();}//eslint-disable-next-line\n},[error,props.history,isAuthenticated]);var _useState=useState({name:'',email:'',password:'',password2:''}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var name=user.name,email=user.email,password=user.password,password2=user.password2;var onChange=function onChange(e){return setUser(_objectSpread({},user,_defineProperty({},e.target.name,e.target.value)));};var onSubmit=function onSubmit(e){e.preventDefault();switch(true){case!name:return setAlert('请输入姓名','danger');case!email:return setAlert('请输入邮箱','danger');case!password:return setAlert('请输入密码','danger');case password!==password2:return setAlert('两次密码不相同','danger');default:return register({name:name,email:email,password:password});}};return/*#__PURE__*/React.createElement(\"div\",{className:\"form-container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"\\u7528\\u6237\",/*#__PURE__*/React.createElement(\"span\",{className:\"text-primary\"},\"\\u6CE8\\u518C\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"name\"},\"\\u59D3\\u540D\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"name\",value:name,onChange:onChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"\\u90AE\\u7BB1\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",name:\"email\",value:email,onChange:onChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"\\u5BC6\\u7801\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",value:password,onChange:onChange,minLength:\"6\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password2\"},\"\\u786E\\u8BA4\\u5BC6\\u7801\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password2\",value:password2,onChange:onChange,minLength:\"6\"})),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"\\u6CE8\\u518C\",className:\"btn btn-primary btn-block\"})));};export default Register;","map":{"version":3,"sources":["/Users/ruoyuwang/Documents/GitHub/contact-keeper/client/src/Components/Auth/Register.js"],"names":["React","useState","useContext","useEffect","AlertContext","AuthContext","Register","props","alertContext","setAlert","authContext","register","error","clearError","isAuthenticated","history","push","name","email","password","password2","user","setUser","onChange","e","target","value","onSubmit","preventDefault"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport AlertContext from '../../Context/Alert/alterContext';\nimport AuthContext from '../../Context/Auth/authContext';\n\nconst Register = props => {\n  const alertContext = useContext(AlertContext);\n  const { setAlert } = alertContext;\n\n  const authContext = useContext(AuthContext);\n  const { register, error, clearError, isAuthenticated } = authContext;\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      props.history.push('/');\n    }\n    if (error === 'The email has already existed') {\n      setAlert('该用户已存在', 'danger');\n      clearError();\n    }\n    //eslint-disable-next-line\n  }, [error, props.history, isAuthenticated]);\n\n  const [user, setUser] = useState({\n    name: '',\n    email: '',\n    password: '',\n    password2: '',\n  });\n\n  const { name, email, password, password2 } = user;\n\n  const onChange = e => setUser({ ...user, [e.target.name]: e.target.value });\n\n  const onSubmit = e => {\n    e.preventDefault();\n    switch (true) {\n      case !name:\n        return setAlert('请输入姓名', 'danger');\n      case !email:\n        return setAlert('请输入邮箱', 'danger');\n      case !password:\n        return setAlert('请输入密码', 'danger');\n      case password !== password2:\n        return setAlert('两次密码不相同', 'danger');\n      default:\n        return register({ name, email, password });\n    }\n  };\n\n  return (\n    <div className='form-container'>\n      <h1>\n        用户<span className='text-primary'>注册</span>\n      </h1>\n      <form onSubmit={onSubmit}>\n        <div className='form-group'>\n          <label htmlFor='name'>姓名</label>\n          <input type='text' name='name' value={name} onChange={onChange} />\n        </div>\n        <div className='form-group'>\n          <label htmlFor='email'>邮箱</label>\n          <input type='email' name='email' value={email} onChange={onChange} />\n        </div>\n        <div className='form-group'>\n          <label htmlFor='password'>密码</label>\n          <input\n            type='password'\n            name='password'\n            value={password}\n            onChange={onChange}\n            minLength='6'\n          />\n        </div>\n        <div className='form-group'>\n          <label htmlFor='password2'>确认密码</label>\n          <input\n            type='password'\n            name='password2'\n            value={password2}\n            onChange={onChange}\n            minLength='6'\n          />\n        </div>\n        <input\n          type='submit'\n          value='注册'\n          className='btn btn-primary btn-block'\n        />\n      </form>\n    </div>\n  );\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}